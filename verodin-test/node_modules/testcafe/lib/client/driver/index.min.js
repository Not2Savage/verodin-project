!function(){function initTestCafeClientDrivers(window,isIFrameWithoutSrc){var document=window.document;!function(u){"use strict";var f,h,o,m,p,i={".js":[],".json":[],".css":[],".html":[]},l="function"==typeof require?require:null;return m=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},p=function(e,t,n){var r,o;if("function"==typeof e[t+n])return t+n;for(r=0;o=i[n][r];++r)if("function"==typeof e[t+o])return t+o;return null},f=function(e,t,n,r,o,i){var a,s,u,l,c,d;for("."!==(a=(n=n.split(/[\\/]/)).pop())&&".."!==a||(n.push(a),a="");null!=(s=n.shift());)if(s&&"."!==s&&(".."===s?(e=t.pop(),i=i.slice(0,i.lastIndexOf("/"))):(t.push(e),e=e[s],i+="/"+s),!e))throw m(r);if(a&&"function"!=typeof e[a]&&((d=p(e,a,".js"))||(d=p(e,a,".json")),d||(d=p(e,a,".css")),d||(d=p(e,a,".html")),d?a=d:2!==o&&"object"==typeof e[a]&&(t.push(e),e=e[a],i+="/"+a,a="")),!a)return 1!==o&&e[":mainpath:"]?f(e,t,e[":mainpath:"],r,1,i):f(e,t,"index",r,2,i);if(!(c=e[a]))throw m(r);return c.hasOwnProperty("module")?c.module.exports:(u={},c.module=l={exports:u,id:i+"/"+a},c.call(u,u,l,h(e,t,i)),l.exports)},o=function(e,t,n,r){var o,i=n,a=n.charAt(0),s=0;if("/"===a){if(i=i.slice(1),!(e=u["/"])){if(l)return l(n);throw m(n)}r="/",t=[]}else if("."!==a){if(o=i.split("/",1)[0],!(e=u[o])){if(l)return l(n);throw m(n)}r=o,t=[],(i=i.slice(o.length+1))||(s=(i=e[":mainpath:"])?1:(i="index",2))}return f(e,t,i,n,s,r)},(h=function(t,n,r){return function(e){return o(t,[].concat(n),e,r)}})(u,[],"")}({replicator:{":mainpath:":"index.js","index.js":function(O,P,Q){var R="@t",T=/^#*@(t|r)$/,U=eval("this"),V="function"==typeof ArrayBuffer,W="function"==typeof Map,X="function"==typeof Set,Y=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],Z=Array.prototype.slice,$={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return JSON.parse(e)}},_=function(e,t){this.references=e,this.transforms=t,this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0};_._createRefMark=function(e){var t=Object.create(null);return t["@r"]=e,t},_.prototype._createCircularCandidate=function(e,t,n){this.circularCandidates.push(e),this.circularCandidatesDescrs.push({parent:t,key:n,refIdx:-1})},_.prototype._applyTransform=function(e,t,n,r){var o=Object.create(null),i=r.toSerializable(e);return"object"==typeof i&&this._createCircularCandidate(e,t,n),o[R]=r.type,o.data=this._handleValue(i,t,n),o},_.prototype._handleArray=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=this._handleValue(e[n],t,n);return t},_.prototype._handlePlainObject=function(n){var r=this,o=Object.create(null);return Object.getOwnPropertyNames(n).forEach(function(e){var t=T.test(e)?"#"+e:e;o[t]=r._handleValue(n[e],o,t)}),o},_.prototype._handleObject=function(e,t,n){return this._createCircularCandidate(e,t,n),Array.isArray(e)?this._handleArray(e):this._handlePlainObject(e)},_.prototype._ensureCircularReference=function(e){var t=this.circularCandidates.indexOf(e);if(-1<t){var n=this.circularCandidatesDescrs[t];return-1===n.refIdx&&(n.refIdx=n.parent?++this.circularRefCount:0),_._createRefMark(n.refIdx)}return null},_.prototype._handleValue=function(e,t,n){var r=typeof e,o="object"===r&&null!==e;if(o){var i=this._ensureCircularReference(e);if(i)return i}for(var a=0;a<this.transforms.length;a++){var s=this.transforms[a];if(s.shouldTransform(r,e))return this._applyTransform(e,t,n,s)}return o?this._handleObject(e,t,n):e},_.prototype.transform=function(){for(var e=[this._handleValue(this.references,null,null)],t=0;t<this.circularCandidatesDescrs.length;t++){var n=this.circularCandidatesDescrs[t];0<n.refIdx&&(e[n.refIdx]=n.parent[n.key],n.parent[n.key]=_._createRefMark(n.refIdx))}return e};var aa=function(e,t){this.references=e,this.transformMap=t,this.activeTransformsStack=[],this.visitedRefs=Object.create(null)};aa.prototype._handlePlainObject=function(t){var n=this,r=Object.create(null),e=Object.getOwnPropertyNames(t);for(var o in e.forEach(function(e){n._handleValue(t[e],t,e),T.test(e)&&(r[e.substring(1)]=t[e],delete t[e])}),r)t[o]=r[o]},aa.prototype._handleTransformedObject=function(e,t,n){var r=e[R],o=this.transformMap[r];if(!o)throw new Error("Can't find transform for \""+r+'" type.');this.activeTransformsStack.push(e),this._handleValue(e.data,e,"data"),this.activeTransformsStack.pop(),t[n]=o.fromSerializable(e.data)},aa.prototype._handleCircularSelfRefDuringTransform=function(e,t,n){var r=this.references,o=void 0;Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return void 0===o&&(o=r[e]),o},set:function(e){return o=e}})},aa.prototype._handleCircularRef=function(e,t,n){-1<this.activeTransformsStack.indexOf(this.references[e])?this._handleCircularSelfRefDuringTransform(e,t,n):(this.visitedRefs[e]||(this.visitedRefs[e]=!0,this._handleValue(this.references[e],this.references,e)),t[n]=this.references[e])},aa.prototype._handleValue=function(e,t,n){if("object"==typeof e&&null!==e){var r=e["@r"];if(void 0!==r)this._handleCircularRef(r,t,n);else if(e[R])this._handleTransformedObject(e,t,n);else if(Array.isArray(e))for(var o=0;o<e.length;o++)this._handleValue(e[o],e,o);else this._handlePlainObject(e)}},aa.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]};var ba=[{type:"[[NaN]]",shouldTransform:function(e,t){return"number"===e&&isNaN(t)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(e){return"undefined"===e},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",shouldTransform:function(e,t){return t instanceof Date},toSerializable:function(e){return e.getTime()},fromSerializable:function(e){var t=new Date;return t.setTime(e),t}},{type:"[[RegExp]]",shouldTransform:function(e,t){return t instanceof RegExp},toSerializable:function(e){var t={src:e.source,flags:""};return e.global&&(t.flags+="g"),e.ignoreCase&&(t.flags+="i"),e.multiline&&(t.flags+="m"),t},fromSerializable:function(e){return new RegExp(e.src,e.flags)}},{type:"[[Error]]",shouldTransform:function(e,t){return t instanceof Error},toSerializable:function(e){return{name:e.name,message:e.message,stack:e.stack}},fromSerializable:function(e){var t=new(U[e.name]||Error)(e.message);return t.stack=e.stack,t}},{type:"[[ArrayBuffer]]",shouldTransform:function(e,t){return V&&t instanceof ArrayBuffer},toSerializable:function(e){var t=new Int8Array(e);return Z.call(t)},fromSerializable:function(e){if(V){var t=new ArrayBuffer(e.length);return new Int8Array(t).set(e),t}return e}},{type:"[[TypedArray]]",shouldTransform:function(e,t){for(var n=0;n<Y.length;n++){var r=Y[n];if("function"==typeof U[r]&&t instanceof U[r])return!0}return!1},toSerializable:function(e){return{ctorName:e.constructor.name,arr:Z.call(e)}},fromSerializable:function(e){return"function"==typeof U[e.ctorName]?new U[e.ctorName](e.arr):e.arr}},{type:"[[Map]]",shouldTransform:function(e,t){return W&&t instanceof Map},toSerializable:function(e){var n=[];return e.forEach(function(e,t){n.push(t),n.push(e)}),n},fromSerializable:function(e){if(W){for(var t=new Map,n=0;n<e.length;n+=2)t.set(e[n],e[n+1]);return t}for(var r=[],o=0;o<e.length;o+=2)r.push([e[n],e[n+1]]);return r}},{type:"[[Set]]",shouldTransform:function(e,t){return X&&t instanceof Set},toSerializable:function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},fromSerializable:function(e){if(X){for(var t=new Set,n=0;n<e.length;n++)t.add(e[n]);return t}return e}}],ca=P.exports=function(e){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=e||$,this.addTransforms(ba)};ca.prototype.addTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var n=e[t];if(this.transformsMap[n.type])throw new Error('Transform with type "'+n.type+'" was already added.');this.transforms.push(n),this.transformsMap[n.type]=n}return this},ca.prototype.removeTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var n=e[t],r=this.transforms.indexOf(n);-1<r&&this.transforms.splice(r,1),delete this.transformsMap[n.type]}return this},ca.prototype.encode=function(e){var t=new _(e,this.transforms).transform();return this.serializer.serialize(t)},ca.prototype.decode=function(e){var t=this.serializer.deserialize(e);return new aa(t,this.transformsMap).transform()}}},"testcafe-release":{src:{client:{driver:{"command-executors":{"browser-manipulation":{"ensure-crop-options.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t){var n=e.getBoundingClientRect(),r={left:n.left,right:n.right,top:n.top,bottom:n.bottom},o=y.styleUtils.getElementMargin(e),i=y.styleUtils.getElementPadding(e),a=y.styleUtils.getBordersWidth(e);t.originOffset={x:0,y:0};var s=r.left+e.scrollWidth+a.left+a.right,u=r.top+e.scrollHeight+a.top+a.bottom;r.right=Math.max(r.right,s),r.bottom=Math.max(r.bottom,u),t.includeBorders&&t.includePaddings?t.includeMargins&&(t.originOffset.x-=o.left,t.originOffset.y-=o.top,r.left-=o.left,r.top-=o.top,r.right+=o.right,r.bottom+=o.bottom):(t.originOffset.x+=a.left,t.originOffset.y+=a.top,r.left+=a.left,r.top+=a.top,r.right-=a.right,r.bottom-=a.bottom,t.includePaddings||(t.originOffset.x+=i.left,t.originOffset.y+=i.top,r.left+=i.left,r.top+=i.top,r.right-=i.right,r.bottom-=i.bottom));r.width=r.right-r.left,r.height=r.bottom-r.top;var l=w({min:t.crop.left,max:t.crop.right,length:t.crop.width},r.width),c=w({min:t.crop.top,max:t.crop.bottom,length:t.crop.height},r.height);if(t.crop.left=l.min,t.crop.right=l.max,t.crop.width=l.length,t.crop.top=c.min,t.crop.bottom=c.max,t.crop.height=c.length,t.crop.width<=0||t.crop.height<=0)throw new S.InvalidElementScreenshotDimensionsError(t.crop.width,t.crop.height);var d=y.styleUtils.getViewportDimensions();(r.width>d.width||r.height>d.height)&&(t.scrollToCenter=!0);var f="number"==typeof t.scrollTargetX,h="number"==typeof t.scrollTargetY;f||(t.scrollTargetX=T(t.crop.left,t.crop.right,d.width));h||(t.scrollTargetY=T(t.crop.top,t.crop.bottom,d.height));var m=(0,_.getOffsetOptions)(e,t.scrollTargetX,t.scrollTargetY),p=m.offsetX,E=m.offsetY;t.scrollTargetX=p,t.scrollTargetY=E;var g=!f||t.scrollTargetX>=t.crop.left&&t.scrollTargetX<=t.crop.right,v=!h||t.scrollTargetY>=t.crop.top&&t.scrollTargetY<=t.crop.bottom;if(!g||!v)throw new S.ActionInvalidScrollTargetError(g,v)};var r,y=n("../../deps/testcafe-core"),_=n("../../deps/testcafe-automation"),o=n("../../../../utils/limit-number"),i=(r=o)&&r.__esModule?r:{default:r},S=n("../../../../errors/test-run");function w(e,t){var n="number"==typeof e.min,r="number"==typeof e.max,o="number"==typeof e.length;return o&&(e.length=(0,i.default)(e.length,0,t)),n&&e.min<0&&(e.min+=t),r&&e.max<0&&(e.max+=t),n||(e.min=r&&o?e.max-e.length:0),r||(e.max=o?e.min+e.length:t),e.min=(0,i.default)(e.min,0,t),e.max=(0,i.default)(e.max,0,t),e.length=e.max-e.min,e}function T(e,t,n){return Math.round(e+(0,i.default)(t-e,0,n)/2)}t.exports=e.default},"index.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){return new v(e,t,n).execute()};var i=n("../../deps/hammerhead"),a=n("../../deps/testcafe-core"),s=n("../../deps/testcafe-automation"),o=n("../../deps/testcafe-ui"),u=r(n("../../status")),l=r(n("./ensure-crop-options")),c=n("../../utils/ensure-elements"),d=r(n("../../utils/run-with-barriers")),f=r(n("../../../../test-run/client-messages")),h=r(n("../../../../test-run/commands/type")),m=n("../../../../test-run/commands/options");function r(e){return e&&e.__esModule?e:{default:e}}var p=i.eventSandbox.message,E="driver|browser-manipulation|request",g="driver|browser-manipulation|response";p.on(p.SERVICE_MSG_RECEIVED_EVENT,function(t){if(t.message.cmd===E){var e=a.domUtils.findIframeByWindow(t.source),n=t.message,r=n.command,o=n.cropDimensions;o&&(r.options=new m.ElementScreenshotOptions({crop:o,includePaddings:!1}));var i=new v(r);i.element=e,i.execute().then(function(e){return p.sendServiceMsg({cmd:g,result:e},t.source)})}});var v=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.command=e,this.globalSelectorTimeout=t,this.statusBar=n,this.element=null}return r.prototype._getAbsoluteCropValues=function(){var e=this.element.getBoundingClientRect(),t=e.top,n=e.left;n+=this.command.options.originOffset.x,t+=this.command.options.originOffset.y;var r=n+this.command.options.crop.right,o=t+this.command.options.crop.bottom;return{top:t+=this.command.options.crop.top,left:n+=this.command.options.crop.left,bottom:o,right:r}},r.prototype._createManipulationReadyMessage=function(){var e=window.devicePixelRatio||1,t={cmd:f.default.readyForBrowserManipulation,pageDimensions:{dpr:e,innerWidth:window.innerWidth,innerHeight:window.innerHeight,documentWidth:document.documentElement.clientWidth,documentHeight:document.documentElement.clientHeight,bodyWidth:document.body.clientWidth,bodyHeight:document.body.clientHeight},disableResending:!0};return this.command.type===h.default.takeElementScreenshot&&(t.cropDimensions=this._getAbsoluteCropValues()),t},r.prototype._runScrollBeforeScreenshot=function(){var o=this;return i.Promise.resolve().then(function(){if(o.element||!o.command.selector)return i.Promise.resolve();var e=o.command.selector.timeout,t="number"==typeof e?e:o.globalSelectorTimeout;return o.statusBar.showWaitingElementStatus(t),(0,c.ensureElements)([(0,c.createElementDescriptor)(o.command.selector)],o.globalSelectorTimeout).then(function(e){o.statusBar.hideWaitingElementStatus(),o.element=e[0]}).catch(function(e){throw o.statusBar.hideWaitingElementStatus(),e})}).then(function(){(0,l.default)(o.element,o.command.options);var e=o.command.options,t=e.scrollTargetX,n=e.scrollTargetY,r=e.scrollToCenter;return new s.Scroll(o.element,new m.ScrollOptions({offsetX:t,offsetY:n,scrollToCenter:r,skipParentFrames:!0})).run()})},r.prototype._hideUI=function(){return(0,o.hide)(),this.command.markData&&(0,o.showScreenshotMark)(this.command.markData),(0,a.delay)(500)},r.prototype._showUI=function(){this.command.markData&&(0,o.hideScreenshotMark)(),(0,o.show)()},r.prototype._requestManipulation=function(){if(window.top===window)return i.transport.queuedAsyncServiceMsg(this._createManipulationReadyMessage());var e=this._getAbsoluteCropValues();return(0,a.sendRequestToFrame)({cmd:E,command:this.command,cropDimensions:e},g,window.parent).then(function(e){if(!e.result)return{result:null};var t=e.result,n=t.result,r=t.executionError;if(r)throw r;return{result:n}})},r.prototype._runManipulation=function(){var r=this,o=null;return i.Promise.resolve().then(function(){return r.command.type!==h.default.takeElementScreenshot?i.Promise.resolve():(a.scrollController.stopPropagation(),r._runScrollBeforeScreenshot())}).then(function(){return window.top===window?r._hideUI():i.Promise.resolve()}).then(function(){return r._requestManipulation()}).then(function(e){var t=e.result,n=e.error;if(n)throw n;return a.scrollController.enablePropagation(),o=t,window.top===window&&r._showUI(),(0,a.delay)(200)}).then(function(){return new u.default({isCommandResult:!0,result:o})}).catch(function(e){return a.scrollController.enablePropagation(),new u.default({isCommandResult:!0,executionError:e})})},r.prototype.execute=function(){var e=this;return(0,d.default)(function(){return e._runManipulation()}).barriersPromise},r}();t.exports=e.default}},"client-functions":{"client-function-executor.js":function(e,t,n){e.__esModule=!0;var r=n("../../deps/hammerhead"),o=u(n("../../status")),i=n("./replicator"),a=u(n("./eval-function")),s=n("../../../../errors/test-run");function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.command=e,this.replicator=this._createReplicator(),this.dependencies=this.replicator.decode(this.command.dependencies),this.fn=(0,a.default)(this.command.fnCode,this.dependencies)}return t.prototype.getResult=function(){var t=this;return r.Promise.resolve().then(function(){var e=t.replicator.decode(t.command.args);return t._executeFn(e)}).catch(function(e){throw e.isTestCafeError||(e=new s.UncaughtErrorInClientFunctionCode(t.command.instantiationCallsiteName,e)),e})},t.prototype.getResultDriverStatus=function(){var t=this;return this.getResult().then(function(e){return new o.default({isCommandResult:!0,result:t.replicator.encode(e)})}).catch(function(e){return new o.default({isCommandResult:!0,executionError:e})})},t.prototype._createReplicator=function(){return(0,i.createReplicator)([new i.ClientFunctionNodeTransform(this.command.instantiationCallsiteName),new i.FunctionTransform])},t.prototype._executeFn=function(e){return this.fn.apply(window,e)},t}();e.default=l,t.exports=e.default},"eval-function.js":function(exports,module,require){exports.__esModule=!0,exports.default=evalFunction;var _hammerhead=require("../../deps/hammerhead"),_hammerhead2=_interopRequireDefault(_hammerhead);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Promise=_hammerhead2.default.Promise;function evalFunction(fnCode,__dependencies$){"use strict";return eval(fnCode)}module.exports=exports.default},"replicator.js":function(e,t,n){e.__esModule=!0,e.ClientFunctionNodeTransform=e.SelectorNodeTransform=e.FunctionTransform=void 0,e.createReplicator=function(e){return new r.default({serialize:d,deserialize:d}).addTransforms(e)};var r=u(n("replicator")),o=u(n("./eval-function")),i=n("./selector-executor/node-snapshots"),a=n("../../../../errors/test-run"),s=u(n("../../deps/hammerhead"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=window.Node,d=function(e){return e};e.FunctionTransform=function(){function e(){l(this,e),this.type="Function"}return e.prototype.shouldTransform=function(e){return"function"===e},e.prototype.toSerializable=function(){return""},e.prototype.fromSerializable=function(e){var t=e.fnCode,n=e.dependencies;return(0,o.default)(t,n)},e}(),e.SelectorNodeTransform=function(){function t(e){l(this,t),this.type="Node",this.customDOMProperties=e||{}}return t.prototype._extend=function(e,n){var r=this;s.default.nativeMethods.objectKeys.call(window.Object,this.customDOMProperties).forEach(function(t){try{e[t]=r.customDOMProperties[t](n)}catch(e){throw new a.UncaughtErrorInCustomDOMPropertyCode(r.instantiationCallsiteName,e,t)}})},t.prototype.shouldTransform=function(e,t){return t instanceof c},t.prototype.toSerializable=function(e){var t=1===e.nodeType?new i.ElementSnapshot(e):new i.NodeSnapshot(e);return this._extend(t,e),t},t}(),e.ClientFunctionNodeTransform=function(){function t(e){l(this,t),this.type="Node",this.instantiationCallsiteName=e}return t.prototype.shouldTransform=function(e,t){if(t instanceof c)throw new a.DomNodeClientFunctionResultError(this.instantiationCallsiteName)},t}()},"selector-executor":{"filter.js":function(e,t,n){var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=n("../../../../../errors/test-run"),a=n("../../../utils/element-utils"),s=l(n("../../../deps/testcafe-core")),u=l(n("../../../deps/hammerhead"));function l(e){return e&&e.__esModule?e:{default:e}}var c=s.default.arrayUtils,d=u.default.utils.types,f=u.default.nativeMethods,h=1,m=2,p=3,E=((r={})[h]=/^\.filterVisible\(\)$/,r[m]=/^\.filterHidden\(\)$/,r[p]=/^\.nth\(\d+\)$/,r),g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.err=null}return e.prototype.filter=function(e,t,n){var r=c.filter(e,a.exists);if(t.filterVisible&&(r=r.filter(a.visible),this.assertFilterError(r,n,h)),t.filterHidden&&(r=r.filter(function(e){return!(0,a.visible)(e)}),this.assertFilterError(r,n,m)),t.counterMode)r=null!==t.index?this.getNodeByIndex(r,t.index)?1:0:r.length;else{if(t.collectionMode){if(null!==t.index){var o=this.getNodeByIndex(r,t.index);r=o?[o]:[]}}else r=this.getNodeByIndex(r,t.index||0);"number"==typeof t.index&&this.assertFilterError(r,n,p)}return r},e.prototype.cast=function(e){var t=null;if(d.isNullOrUndefined(e))t=[];else if(e instanceof Node)t=[e];else{if(!(0,a.IsNodeCollection)(e))throw new i.InvalidSelectorResultError;t=e}return t},e.prototype.assertFilterError=function(e,t,n){e&&0!==e.length||(this.error=this.getErrorItem(t,n))},e.prototype.getErrorItem=function(e,t){var n=e.apiFnChain,r=e.apiFnID;if(t)for(var o=r;o<n.length;o++)if(E[t].test(n[o]))return o;return null},e.prototype.getNodeByIndex=function(e,t){return t<0?e[e.length+t]:e[t]},o(e,[{key:"error",get:function(){return this.err},set:function(e){null===this.err&&(this.err=e)}}]),e}();f.objectDefineProperty.call(window,window,"%testCafeSelectorFilter%",{value:new g,configurable:!0})},"index.js":function(e,t,n){e.__esModule=!0;var r,o=n("../../../deps/hammerhead"),c=n("../../../deps/testcafe-core"),i=n("../client-function-executor"),a=(r=i)&&r.__esModule?r:{default:r},d=n("../../../utils/element-utils"),f=n("../replicator");n("./filter");var s=function(u){function l(e,t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,u.call(this,e));if(i.createNotFoundError=r,i.createIsInvisibleError=o,i.timeout="number"==typeof e.timeout?e.timeout:t,i.counterMode=i.dependencies.filterOptions.counterMode,n){var a=new Date-n;i.timeout=Math.max(i.timeout-a,0)}var s=i.dependencies&&i.dependencies.customDOMProperties;return i.replicator.addTransforms([new f.SelectorNodeTransform(s)]),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,u),l.prototype._createReplicator=function(){return(0,f.createReplicator)([new f.FunctionTransform])},l.prototype._getTimeoutErrorParams=function(){var e=window["%testCafeSelectorFilter%"].error,t=this.command.apiFnChain;return void 0!==e?{apiFnIndex:e,apiFnChain:t}:null},l.prototype._validateElement=function(i,a){var s=this;return o.Promise.resolve().then(function(){return s.fn.apply(window,i)}).then(function(e){var t=(0,d.exists)(e),n=!s.command.visibilityCheck||(0,d.visible)(e),r=t?s.createIsInvisibleError:s.createNotFoundError,o=new Date-a>=s.timeout;if(t&&n)return e;if(!o)return(0,c.delay)(200).then(function(){return s._validateElement(i,a)});if(r)throw r(s._getTimeoutErrorParams());return null})},l.prototype._executeFn=function(e){if(this.counterMode)return u.prototype._executeFn.call(this,e);var t=new Date,n=null,r=null;return this._validateElement(e,t).catch(function(e){n=e}).then(function(e){if(n)throw n;r=e}).then(function(){return r})},l}(a.default);e.default=s,t.exports=e.default},"node-snapshots.js":function(e,t,n){e.__esModule=!0,e.ElementSnapshot=e.NodeSnapshot=void 0;var r=n("../../../deps/testcafe-core"),o=n("../../../../../client-functions/selectors/snapshot-properties");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a={textContent:function(e){return e.textContent},childNodeCount:function(e){return e.childNodes.length},hasChildNodes:function(e){return!!a.childNodeCount(e)},childElementCount:function(e){var t=e.children;if(t)return t.length;for(var n=0,r=e.childNodes.length,o=0;o<r;o++)1===e.childNodes[o].nodeType&&n++;return n},hasChildElements:function(e){return!!a.childElementCount(e)}},s=e.NodeSnapshot=function(){function t(e){i(this,t),this._initializeProperties(e,o.NODE_SNAPSHOT_PROPERTIES,a)}return t.prototype._initializeProperties=function(e,t,n){for(var r=0;r<t.length;r++){var o=t[r],i=n[o];this[o]=i?i(e):e[o]}},t}(),u={tagName:function(e){return e.tagName.toLowerCase()},visible:r.positionUtils.isElementVisible,focused:function(e){return r.domUtils.getActiveElement()===e},attributes:function(e){for(var t=e.attributes,n={},r=t.length-1;0<=r;r--)n[t[r].name]=t[r].value;return n},boundingClientRect:function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height}},classNames:function(e){var t=e.className;return(t="string"==typeof t.animVal?t.animVal:t).replace(/^\s+|\s+$/g,"").split(/\s+/g)},style:function(e){for(var t={},n=window.getComputedStyle(e),r=0;r<n.length;r++){var o=n[r];t[o]=n[o]}return t},innerText:function(e){return e.innerText}};e.ElementSnapshot=function(n){function r(e){i(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e));return t._initializeProperties(e,o.ELEMENT_SNAPSHOT_PROPERTIES,u),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(s)}}},"execute-action.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n,r){return new h(e,t,n,r).execute()};var i=n("../deps/hammerhead"),r=n("../deps/testcafe-core"),a=n("../deps/testcafe-automation"),s=o(n("../status")),u=o(n("../utils/run-with-barriers")),l=n("../utils/ensure-elements"),c=n("../../../errors/test-run"),d=o(n("../../../test-run/commands/type"));function o(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!r.domUtils.isContentEditableElement(e))throw new c.ActionElementNonContentEditableError(t)}var h=function(){function o(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.command=e,this.globalSelectorTimeout=t,this.statusBar=n,this.testSpeed=r,this.elements=[],this.ensureElementsPromise=null,this.ensureElementsStartTime=null,this.executionStartTime=null,this.executionStartedHandler=null,this.commandSelectorTimeout=null}return o.prototype._getSpecificTimeout=function(){return this.command.selector&&"number"==typeof this.command.selector.timeout?this.command.selector.timeout:this.globalSelectorTimeout},o.prototype._delayAfterExecution=function(){return this.command.options&&1!==this.command.options.speed?(0,r.delay)(2e3*(1-this.command.options.speed)):i.Promise.resolve()},o.prototype._isExecutionTimeoutExpired=function(){return Date.now()-this.executionStartTime>=this.commandSelectorTimeout},o.prototype._ensureCommandArguments=function(){if(this.command.type===d.default.pressKey&&(0,r.parseKeySequence)(this.command.keys).error)throw new c.ActionIncorrectKeysError("keys")},o.prototype._ensureCommandElements=function(){var t=this,e=[];return this.command.selector&&e.push((0,l.createElementDescriptor)(this.command.selector)),this.command.type===d.default.dragToElement?e.push((0,l.createAdditionalElementDescriptor)(this.command.destinationSelector,"destinationSelector")):this.command.type===d.default.selectEditableContent&&(e.push((0,l.createAdditionalElementDescriptor)(this.command.startSelector,"startSelector")),e.push((0,l.createAdditionalElementDescriptor)(this.command.endSelector||this.command.startSelector,"endSelector"))),(0,l.ensureElements)(e,this.globalSelectorTimeout).then(function(e){t.elements=e})},o.prototype._ensureCommandElementsProperties=function(){this.command.type===d.default.selectText?function(e){if(!r.domUtils.isEditableElement(e))throw new c.ActionElementNonEditableError}(this.elements[0]):this.command.type===d.default.selectTextAreaContent?function(e){if(!r.domUtils.isTextAreaElement(e))throw new c.ActionElementNotTextAreaError}(this.elements[0]):this.command.type===d.default.selectEditableContent?(f(this.elements[0],"startSelector"),f(this.elements[1],"endSelector"),function(e){if(!r.contentEditable.getNearestCommonAncestor(e[0],e[1]))throw new c.ActionRootContainerNotFoundError}(this.elements)):this.command.type!==d.default.setFilesToUpload&&this.command.type!==d.default.clearUpload||function(e){if(!r.domUtils.isFileInput(e))throw new c.ActionElementIsNotFileInputError}(this.elements[0])},o.prototype._ensureCommandOptions=function(){var e,t,n,r,o;this.elements.length&&this.command.options&&"offsetX"in this.command.options&&"offsetY"in this.command.options&&(e=this.elements[0],t=this.command.options,n=(0,a.getOffsetOptions)(e,t.offsetX,t.offsetY),r=n.offsetX,o=n.offsetY,t.offsetX=r,t.offsetY=o)},o.prototype._createAutomation=function(){var e=null;switch(this.command.type){case d.default.click:return/option|optgroup/.test(r.domUtils.getTagName(this.elements[0]))?new a.SelectChildClick(this.elements[0],this.command.options):new a.Click(this.elements[0],this.command.options);case d.default.rightClick:return new a.RClick(this.elements[0],this.command.options);case d.default.doubleClick:return new a.DblClick(this.elements[0],this.command.options);case d.default.hover:return new a.Hover(this.elements[0],this.command.options);case d.default.drag:return new a.DragToOffset(this.elements[0],this.command.dragOffsetX,this.command.dragOffsetY,this.command.options);case d.default.dragToElement:return new a.DragToElement(this.elements[0],this.elements[1],this.command.options);case d.default.typeText:return new a.Type(this.elements[0],this.command.text,this.command.options);case d.default.selectText:case d.default.selectTextAreaContent:return e=(0,a.calculateSelectTextArguments)(this.elements[0],this.command),new a.SelectText(this.elements[0],e.startPos,e.endPos,this.command.options);case d.default.selectEditableContent:return new a.SelectEditableContent(this.elements[0],this.elements[1],this.command.options);case d.default.pressKey:return new a.Press((0,r.parseKeySequence)(this.command.keys).combinations,this.command.options);case d.default.setFilesToUpload:return new a.Upload(this.elements[0],this.command.filePath,function(e){return new c.ActionCannotFindFileToUploadError(e)});case d.default.clearUpload:return new a.Upload(this.elements[0])}return null},o.prototype._runAction=function(t){var n=this;return this._ensureCommandElements().then(function(){return n._ensureCommandElementsProperties()}).then(function(){n._ensureCommandOptions();var e=n._createAutomation();return e.TARGET_ELEMENT_FOUND_EVENT?e.on(e.TARGET_ELEMENT_FOUND_EVENT,function(){n.statusBar.hideWaitingElementStatus(!0),n.executionStartedHandler()}):(n.statusBar.hideWaitingElementStatus(!0),n.executionStartedHandler()),e.run(t)})},o.prototype._runRecursively=function(){var t=this,e=!1,n=!0;return r.promiseUtils.whilst(function(){return!e},function(){return t._runAction(n).then(function(){e=!0}).catch(function(e){if(t._isExecutionTimeoutExpired()){if(e.message===a.ERROR_TYPES.foundElementIsNotTarget)return n=!1,i.Promise.resolve();throw e.message===a.ERROR_TYPES.elementIsInvisibleError?new c.ActionElementIsInvisibleError:e}return(0,r.delay)(250)})})},o.prototype.execute=function(){var o=this;return this.command.options&&!this.command.options.speed&&(this.command.options.speed=this.testSpeed),{startPromise:new i.Promise(function(e){o.executionStartedHandler=e}),completionPromise:new i.Promise(function(t){o.executionStartTime=new Date;try{o._ensureCommandArguments()}catch(e){return void t(new s.default({isCommandResult:!0,executionError:e}))}o.commandSelectorTimeout=o._getSpecificTimeout(),o.statusBar.showWaitingElementStatus(o.commandSelectorTimeout);var e=(0,u.default)(function(){return o._runRecursively()}),n=e.actionPromise,r=e.barriersPromise;n.then(function(){return i.Promise.all([o._delayAfterExecution(),r])}).then(function(){return t(new s.default({isCommandResult:!0}))}).catch(function(e){return o.statusBar.hideWaitingElementStatus(!1).then(function(){return t(new s.default({isCommandResult:!0,executionError:e}))})})})}},o}();t.exports=e.default},"execute-navigate-to.js":function(e,t,n){e.__esModule=!0,e.default=function(t){var e=u.url.getNavigationUrl(t.url,window),n=r.default.Promise.resolve();e&&o.browser.isRetryingTestPagesEnabled()&&(n=o.browser.fetchPageToCache(e,s));return n.then(function(){var e=new o.RequestBarrier;return r.default.navigateTo(t.url),r.default.Promise.all([e.wait(),o.pageUnloadBarrier.wait()])}).then(function(){return new i.default({isCommandResult:!0})}).catch(function(e){return new i.default({isCommandResult:!0,executionError:e})})};var r=a(n("../deps/hammerhead")),o=n("../deps/testcafe-core"),i=a(n("../status"));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.createNativeXHR,u=r.default.utils;t.exports=e.default},"execute-selector.js":function(e,t,n){e.__esModule=!0,e.getResult=function(e,t,n,r,o,i){var a=new s.default(e,t,n,r,o);return i.showWaitingElementStatus(a.timeout),a.getResult().then(function(e){return i.hideWaitingElementStatus(!!e).then(function(){return e})}).catch(function(e){return i.hideWaitingElementStatus(!1).then(function(){throw e})})},e.getResultDriverStatus=function(e,t,n,r,o,i){var a=new s.default(e,t,n,r,o);return i.showWaitingElementStatus(a.timeout),a.getResultDriverStatus().then(function(e){return i.hideWaitingElementStatus(!!e.result).then(function(){return e})})};var r,o=n("./client-functions/selector-executor"),s=(r=o)&&r.__esModule?r:{default:r}}},deps:{"hammerhead.js":function(e,t,n){e.__esModule=!0,e.default=window["%hammerhead%"],t.exports=e.default},"testcafe-automation.js":function(e,t,n){e.__esModule=!0,e.default=window["%testCafeAutomation%"],t.exports=e.default},"testcafe-core.js":function(e,t,n){e.__esModule=!0,e.default=window["%testCafeCore%"],t.exports=e.default},"testcafe-ui.js":function(e,t,n){e.__esModule=!0,e.default=window["%testCafeUI%"],t.exports=e.default}},"driver-link":{"child.js":function(e,t,n){e.__esModule=!0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=n("../deps/hammerhead"),i=n("../deps/testcafe-core"),a=n("../../../errors/test-run"),s=c(n("./send-message-to-driver")),u=n("./messages"),l=c(n("../status"));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.driverWindow=e,this.driverIframe=i.domUtils.findIframeByWindow(e),this.driverId=t,this.iframeAvailabilityTimeout=0}return n.prototype._ensureIframe=function(){var e=this;return i.domUtils.isElementInDocument(this.driverIframe)?(0,i.waitFor)(function(){return i.positionUtils.isElementVisible(e.driverIframe)?e.driverIframe:null},200,this.iframeAvailabilityTimeout).catch(function(){throw new a.CurrentIframeIsInvisibleError}):o.Promise.reject(new a.CurrentIframeNotFoundError)},n.prototype._waitForIframeRemovedOrHidden=function(){var t=this;return new o.Promise(function(e){t.checkIframeInterval=o.nativeMethods.setInterval.call(window,function(){t._ensureIframe().catch(function(){return(0,i.delay)(500).then(function(){return e(new l.default({isCommandResult:!0}))})})},1e3)})},n.prototype._waitForCommandResult=function(){var t=this,n=null;return o.Promise.race([this._waitForIframeRemovedOrHidden(),new o.Promise(function(t){n=function(e){e.message.type===u.TYPE.commandExecuted&&t(e.message.driverStatus)},o.eventSandbox.message.on(o.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,n)})]).then(function(e){return o.eventSandbox.message.off(o.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,n),o.nativeMethods.clearInterval.call(window,t.checkIframeInterval),e})},n.prototype.confirmConnectionEstablished=function(e){var t=new u.ConfirmationMessage(e,{id:this.driverId});o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},n.prototype.executeCommand=function(t,n){var r=this;return this._ensureIframe().then(function(){var e=new u.ExecuteCommandMessage(t,n);return o.Promise.all([(0,s.default)(e,r.driverWindow,r.iframeAvailabilityTimeout,a.CurrentIframeIsNotLoadedError),r._waitForCommandResult()])}).then(function(e){return e[1]})},r(n,[{key:"availabilityTimeout",set:function(e){this.iframeAvailabilityTimeout=e}}]),n}();e.default=d,t.exports=e.default},"messages.js":function(e,t,n){e.__esModule=!0,e.SetNativeDialogHandlerMessage=e.ConfirmationMessage=e.ExecuteCommandMessage=e.CommandExecutedMessage=e.EstablishConnectionMessage=e.TYPE=void 0;var r,o=n("../generate-id"),i=(r=o)&&r.__esModule?r:{default:r};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=e.TYPE={establishConnection:"driver|establish-connection",commandExecuted:"driver|command-executed",executeCommand:"driver|execute-command",confirmation:"driver|confirmation",setNativeDialogHandler:"driver|set-native-dialog-handler"},c=function e(t){u(this,e),this.type=t,this.id=(0,i.default)()};e.EstablishConnectionMessage=function(e){function t(){return u(this,t),a(this,e.call(this,l.establishConnection))}return s(t,e),t}(c),e.CommandExecutedMessage=function(n){function r(e){u(this,r);var t=a(this,n.call(this,l.commandExecuted));return t.driverStatus=e,t}return s(r,n),r}(c),e.ExecuteCommandMessage=function(r){function o(e,t){u(this,o);var n=a(this,r.call(this,l.executeCommand));return n.command=e,n.testSpeed=t,n}return s(o,r),o}(c),e.ConfirmationMessage=function(r){function o(e,t){u(this,o);var n=a(this,r.call(this,l.confirmation));return n.requestMessageId=e,n.result=t,n}return s(o,r),o}(c),e.SetNativeDialogHandlerMessage=function(n){function r(e){u(this,r);var t=a(this,n.call(this,l.setNativeDialogHandler));return t.dialogHandler=e,t}return s(r,n),r}(c)},"parent.js":function(e,t,n){e.__esModule=!0;var r,o=n("../deps/hammerhead"),i=n("./messages"),a=n("../../../errors/test-run"),s=n("./send-message-to-driver"),u=(r=s)&&r.__esModule?r:{default:r};var l=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.driverWindow=e}return t.prototype.establishConnection=function(){var e=new i.EstablishConnectionMessage;return(0,u.default)(e,this.driverWindow,5e3,a.CurrentIframeIsNotLoadedError).then(function(e){return e.result.id})},t.prototype.confirmMessageReceived=function(e){var t=new i.ConfirmationMessage(e);o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},t.prototype.onCommandExecuted=function(e){var t=new i.CommandExecutedMessage(e);o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},t}();e.default=l,t.exports=e.default},"send-message-to-driver.js":function(e,t,n){e.__esModule=!0,e.default=function(n,e,t,r){var o=null,i=null;t=Math.max(t||0,l);return a.Promise.race([(0,s.delay)(t),new a.Promise(function(t){i=function(e){e.message.type===u.TYPE.confirmation&&e.message.requestMessageId===n.id&&t(e.message)},a.eventSandbox.message.on(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,i),o=a.nativeMethods.setInterval.call(window,function(){return a.eventSandbox.message.sendServiceMsg(n,e)},c),a.eventSandbox.message.sendServiceMsg(n,e)})]).then(function(e){if(a.nativeMethods.clearInterval.call(window,o),a.nativeMethods.clearTimeout.call(window,null),a.eventSandbox.message.off(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,i),!e)throw new r;return e})};var a=n("../deps/hammerhead"),s=n("../deps/testcafe-core"),u=n("./messages"),l=2500,c=1e3;t.exports=e.default}},"driver.js":function(e,t,n){e.__esModule=!0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=i(n("./deps/hammerhead")),s=n("./deps/testcafe-core"),o=n("./deps/testcafe-ui"),u=i(n("../../test-run/client-messages")),l=i(n("../../test-run/commands/type")),c=n("../../test-run/commands/utils"),d=n("../../errors/test-run"),f=i(n("../../test-run/browser-console-messages")),h=i(n("./native-dialog-tracker")),m=n("./driver-link/messages"),p=i(n("./storage")),E=i(n("./status")),g=i(n("./generate-id")),v=i(n("./driver-link/child")),y=i(n("./command-executors/execute-action")),_=i(n("./command-executors/browser-manipulation")),S=i(n("./command-executors/execute-navigate-to")),w=n("./command-executors/execute-selector"),T=i(n("./command-executors/client-functions/client-function-executor"));function i(e){return e&&e.__esModule?e:{default:e}}var R=a.default.transport,C=a.default.Promise,b=a.default.eventSandbox.message,I=a.default.storages,x=a.default.nativeMethods,N=x.date,A="testcafe|driver|test-done-sent-flag",O="testcafe|driver|pending-status",M="testcafe|driver|executing-client-function-descriptor",P="testcafe|driver|selector-execution-start-time",D="testcafe|driver|pending-page-error",U="testcafe|driver|active-iframe-selector",F="testcafe|driver|test-speed",k="testcafe|driver|assertion-retries-timeout",j="testcafe|driver|assertion-retries-start-time",B="testcafe|driver|console-messages",H={NotLoadedError:d.ActionIframeIsNotLoadedError,NotFoundError:d.ActionElementNotFoundError,IsInvisibleError:d.ActionElementIsInvisibleError},L={NotLoadedError:d.CurrentIframeIsNotLoadedError,NotFoundError:d.CurrentIframeNotFoundError,IsInvisibleError:d.CurrentIframeIsInvisibleError},W=function(){function i(e,t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.COMMAND_EXECUTING_FLAG="testcafe|driver|command-executing-flag",this.EXECUTING_IN_IFRAME_FLAG="testcafe|driver|executing-in-iframe-flag",this.testRunId=e,this.heartbeatUrl=t.heartbeat,this.browserStatusUrl=t.status,this.browserStatusDoneUrl=t.statusDone,this.userAgent=n.userAgent,this.fixtureName=n.fixtureName,this.testName=n.testName,this.selectorTimeout=r.selectorTimeout,this.pageLoadTimeout=r.pageLoadTimeout,this.initialSpeed=r.speed,this.skipJsErrors=r.skipJsErrors,this.dialogHandler=r.dialogHandler,this.customCommandHandlers={},this.contextStorage=null,this.nativeDialogsTracker=null,this.childDriverLinks=[],this.activeChildDriverLink=null,this.statusBar=null,r.retryTestPages&&s.browser.enableRetryingTestPages(),this.pageInitialRequestBarrier=new s.RequestBarrier,this.readyPromise=s.eventUtils.documentReady(this.pageLoadTimeout).then(function(){return o.pageInitialRequestBarrier.wait(!0)}),this._initChildDriverListening(),s.pageUnloadBarrier.init(),(0,s.preventRealEvents)(),a.default.on(a.default.EVENTS.uncaughtJsError,function(e){return o._onJsError(e)}),a.default.on(a.default.EVENTS.unhandledRejection,function(e){return o._onJsError(e)}),a.default.on(a.default.EVENTS.consoleMethCalled,function(e){return o._onConsoleMessage(e)}),this.setCustomCommandHandlers(l.default.unlockPage,function(){return o._unlockPageAfterTestIsDone()})}return i.prototype._onJsError=function(e){if(this.skipJsErrors||this.contextStorage.getItem(A))return C.resolve();var t=new d.UncaughtErrorOnPage(e.stack,e.pageUrl);return this.contextStorage.getItem(D)||this.contextStorage.setItem(D,t),null},i.prototype._unlockPageAfterTestIsDone=function(){return(0,s.disableRealEventsPreventing)(),C.resolve()},i.prototype._failIfClientCodeExecutionIsInterrupted=function(){var e=this.contextStorage.getItem(M);return!!e&&(this._onReady(new E.default({isCommandResult:!0,executionError:new d.ClientFunctionExecutionInterruptionError(e.instantiationCallsiteName)})),!0)},i.prototype._onConsoleMessage=function(e){var t=e.meth,n=e.line,r=this.consoleMessages;r.addMessage(t,n),this.consoleMessages=r},i.prototype._addPendingErrorToStatus=function(e){var t=this.contextStorage.getItem(D);t&&(this.contextStorage.setItem(D,null),e.pageError=t)},i.prototype._addUnexpectedDialogErrorToStatus=function(e){var t=this.nativeDialogsTracker.getUnexpectedDialogError();e.pageError=e.pageError||t},i.prototype._addConsoleMessagesToStatus=function(e){e.consoleMessages=this.consoleMessages,this.consoleMessages=null},i.prototype._sendStatusRequest=function(e){for(var t={cmd:u.default.ready,status:e,disableResending:!0,allowRejecting:!0},n=function(){return(0,s.getTimeLimitedPromise)(R.asyncServiceMsg(t),5e3)},r=function(){return(0,s.delay)(300).then(n)},o=n(),i=0;i<5;i++)o=o.catch(r);return o},i.prototype._sendStatus=function(e){var t=this;e.resent||(this._addPendingErrorToStatus(e),this._addUnexpectedDialogErrorToStatus(e),this._addConsoleMessagesToStatus(e)),this.contextStorage.setItem(O,e);var n=null;return s.pageUnloadBarrier.wait(0).then(function(){return t._sendStatusRequest(e)}).then(function(e){return n=e,s.pageUnloadBarrier.wait(0)}).then(function(){return t.contextStorage.setItem(O,null),n})},i.prototype._initChildDriverListening=function(){var i=this;b.on(b.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message,n=e.source;if(t.type===m.TYPE.establishConnection){var r=i._getChildDriverLinkByWindow(n);if(!r){var o=i.testRunId+"-"+(0,g.default)();r=new v.default(n,o),i.childDriverLinks.push(r)}r.confirmConnectionEstablished(t.id)}})},i.prototype._getChildDriverLinkByWindow=function(t){return this.childDriverLinks.filter(function(e){return e.driverWindow===t})[0]},i.prototype._runInActiveIframe=function(e){var t=this,n=C.resolve(),r=this.contextStorage.getItem(U);!this.activeChildDriverLink&&r&&(n=this._switchToIframe(r,L)),n.then(function(){return t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!0),t.activeChildDriverLink.executeCommand(e,t.speed)}).then(function(e){return t._onCommandExecutedInIframe(e)}).catch(function(e){return t._onCommandExecutedInIframe(new E.default({isCommandResult:!0,executionError:e}))})},i.prototype._onCommandExecutedInIframe=function(e){this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(e)},i.prototype._ensureChildDriverLink=function(e,t,n){var r=this;return(0,s.waitFor)(function(){return r._getChildDriverLinkByWindow(e)},500,n).catch(function(){throw new t})},i.prototype._switchToIframe=function(t,n){var r=this,o="number"==typeof t.timeout?t.timeout:this.selectorTimeout;return(0,w.getResult)(t,o,null,function(e){return new n.NotFoundError(e)},function(){return n.IsInvisibleError()},this.statusBar).then(function(e){if(!s.domUtils.isIframeElement(e))throw new d.ActionElementNotIframeError;return r._ensureChildDriverLink(x.contentWindowGetter.call(e),n.NotLoadedError,o)}).then(function(e){e.availabilityTimeout=o,r.activeChildDriverLink=e,r.contextStorage.setItem(U,t)})},i.prototype._switchToMainWindow=function(e){this.activeChildDriverLink&&this.activeChildDriverLink.executeCommand(e),this.contextStorage.setItem(U,null),this.activeChildDriverLink=null},i.prototype._setNativeDialogHandlerInIframes=function(e){for(var t=new m.SetNativeDialogHandlerMessage(e),n=0;n<this.childDriverLinks.length;n++)b.sendServiceMsg(t,this.childDriverLinks[n].driverWindow)},i.prototype._onActionCommand=function(e){var t=this,n=(0,y.default)(e,this.selectorTimeout,this.statusBar,this.speed),r=n.startPromise,o=n.completionPromise;r.then(function(){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!0)}),o.then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},i.prototype._onSetNativeDialogHandlerCommand=function(e){this.nativeDialogsTracker.setHandler(e.dialogHandler),this._setNativeDialogHandlerInIframes(e.dialogHandler),this._onReady(new E.default({isCommandResult:!0}))},i.prototype._onGetNativeDialogHistoryCommand=function(){this._onReady(new E.default({isCommandResult:!0,result:this.nativeDialogsTracker.appearedDialogs}))},i.prototype._onGetBrowserConsoleMessagesCommand=function(){this._onReady(new E.default({isCommandResult:!0}))},i.prototype._onNavigateToCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,S.default)(e).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},i.prototype._onExecuteClientFunctionCommand=function(e){var t=this;this.contextStorage.setItem(M,{instantiationCallsiteName:e.instantiationCallsiteName}),new T.default(e).getResultDriverStatus().then(function(e){t.contextStorage.setItem(M,null),t._onReady(e)})},i.prototype._onExecuteSelectorCommand=function(e){var t=this,n=this.contextStorage.getItem(P)||new N,r=e.needError?function(e){return new d.CannotObtainInfoForElementSpecifiedBySelectorError(null,e)}:null;(0,w.getResultDriverStatus)(e,this.selectorTimeout,n,r,r,this.statusBar).then(function(e){t.contextStorage.setItem(P,null),t._onReady(e)})},i.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e),this._onReady(new E.default({isCommandResult:!0}))},i.prototype._onSwitchToIframeCommand=function(e){var t=this;this._switchToIframe(e.selector,H).then(function(){return t._onReady(new E.default({isCommandResult:!0}))}).catch(function(e){return t._onReady(new E.default({isCommandResult:!0,executionError:e}))})},i.prototype._onBrowserManipulationCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,_.default)(e,this.selectorTimeout,this.statusBar).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},i.prototype._onSetBreakpointCommand=function(e){var t=this;this.statusBar.showDebuggingStatus(e).then(function(e){return t._onReady(new E.default({isCommandResult:!0,result:e}))})},i.prototype._onSetTestSpeedCommand=function(e){this.speed=e.speed,this._onReady(new E.default({isCommandResult:!0}))},i.prototype._onShowAssertionRetriesStatusCommand=function(e){this.contextStorage.setItem(k,e.timeout),this.contextStorage.setItem(j,Date.now()),this.statusBar.showWaitingAssertionRetriesStatus(e.timeout),this._onReady(new E.default({isCommandResult:!0}))},i.prototype._onHideAssertionRetriesStatusCommand=function(e){var t=this;this.contextStorage.setItem(k,null),this.contextStorage.setItem(j,null),this.statusBar.hideWaitingAssertionRetriesStatus(e.success).then(function(){return t._onReady(new E.default({isCommandResult:!0}))})},i.prototype._checkStatus=function(){var r=this;return s.browser.checkStatus(this.browserStatusDoneUrl,a.default.createNativeXHR,{manualRedirect:!0}).then(function(e){var t=e.command,n=e.redirecting;n&&t.url.indexOf(r.testRunId)<0?(I.clear(),I.lock()):r.contextStorage.setItem(A,!1),n?s.browser.redirect(t):r._onReady({isCommandResult:!1})}).catch(function(){return(0,s.delay)(1e3)})},i.prototype._onCustomCommand=function(e){var t=this;(0,this.customCommandHandlers[e.type].handler)(e).then(function(e){t._onReady(new E.default({isCommandResult:!0,result:e}))})},i.prototype._onTestDone=function(e){var t=this;this.contextStorage.setItem(A,!0),this._sendStatus(e).then(function(){return t._checkStatus()})},i.prototype._onBackupStoragesCommand=function(){this._onReady(new E.default({isCommandResult:!0,result:I.backup()}))},i.prototype._onReady=function(e){var t=this;this._sendStatus(e).then(function(e){e?t._onCommand(e):t._onReady(new E.default)})},i.prototype._executeCommand=function(e){this.customCommandHandlers[e.type]?this._onCustomCommand(e):e.type===l.default.testDone?this._onTestDone(new E.default({isCommandResult:!0})):e.type===l.default.setBreakpoint?this._onSetBreakpointCommand(e.isTestError):e.type===l.default.switchToMainWindow?this._onSwitchToMainWindowCommand(e):e.type===l.default.switchToIframe?this._onSwitchToIframeCommand(e):(0,c.isBrowserManipulationCommand)(e)?this._onBrowserManipulationCommand(e):e.type===l.default.executeClientFunction?this._onExecuteClientFunctionCommand(e):e.type===l.default.executeSelector?this._onExecuteSelectorCommand(e):e.type===l.default.navigateTo?this._onNavigateToCommand(e):e.type===l.default.setNativeDialogHandler?this._onSetNativeDialogHandlerCommand(e):e.type===l.default.getNativeDialogHistory?this._onGetNativeDialogHistoryCommand(e):e.type===l.default.getBrowserConsoleMessages?this._onGetBrowserConsoleMessagesCommand(e):e.type===l.default.setTestSpeed?this._onSetTestSpeedCommand(e):e.type===l.default.showAssertionRetriesStatus?this._onShowAssertionRetriesStatusCommand(e):e.type===l.default.hideAssertionRetriesStatus?this._onHideAssertionRetriesStatusCommand(e):e.type===l.default.backupStorages?this._onBackupStoragesCommand():this._onActionCommand(e)},i.prototype._isExecutableInTopWindowOnly=function(e){if((0,c.isExecutableInTopWindowOnly)(e))return!0;var t=this.customCommandHandlers[e.type];return t&&t.isExecutableInTopWindowOnly},i.prototype._onCommand=function(n){var r=this;this.readyPromise.then(function(){var e=(0,c.isCommandRejectableByPageError)(n);if(r.contextStorage.getItem(D)&&e)r._onReady(new E.default({isCommandResult:!0}));else{var t=r.activeChildDriverLink||r.contextStorage.getItem(U);r._isExecutableInTopWindowOnly(n)||!t?r._executeCommand(n):r._runInActiveIframe(n)}})},i.prototype.setCustomCommandHandlers=function(e,t,n){this.customCommandHandlers[e]={isExecutableInTopWindowOnly:n,handler:t}},i.prototype.start=function(){var n=this;this.contextStorage=new p.default(window,this.testRunId),this.nativeDialogsTracker=new h.default(this.contextStorage,this.dialogHandler),this.speed||(this.speed=this.initialSpeed),s.browser.startHeartbeat(this.heartbeatUrl,a.default.createNativeXHR),this.statusBar=new o.StatusBar(this.userAgent,this.fixtureName,this.testName),this.statusBar.on(this.statusBar.UNLOCK_PAGE_BTN_CLICK,s.disableRealEventsPreventing),this.readyPromise.then(function(){n.statusBar.hidePageLoadingStatus();var e=n.contextStorage.getItem(k);if(e){var t=n.contextStorage.getItem(j);0<e-(new Date-t)&&n.statusBar.showWaitingAssertionRetriesStatus(e,t)}});var e=this.contextStorage.getItem(O);if(e&&(e.resent=!0),this.contextStorage.getItem(A))e?this._onTestDone(e):this._checkStatus();else if(!this._failIfClientCodeExecutionIsInterrupted()){var t=this.contextStorage.getItem(this.COMMAND_EXECUTING_FLAG)||this.contextStorage.getItem(this.EXECUTING_IN_IFRAME_FLAG),r=e||new E.default({isCommandResult:t});this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!1),this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(r)}},r(i,[{key:"speed",set:function(e){this.contextStorage.setItem(F,e)},get:function(){return this.contextStorage.getItem(F)}},{key:"consoleMessages",get:function(){return new f.default(this.contextStorage.getItem(B))},set:function(e){return this.contextStorage.setItem(B,e?e.getCopy():null)}}]),i}();e.default=W,t.exports=e.default},"embedding-utils.js":function(e,t,n){e.__esModule=!0;var r,o=n("./command-executors/client-functions/selector-executor/node-snapshots"),i=n("./command-executors/client-functions/selector-executor"),a=(r=i)&&r.__esModule?r:{default:r};e.default={NodeSnapshot:o.NodeSnapshot,ElementSnapshot:o.ElementSnapshot,SelectorExecutor:a.default},t.exports=e.default},"generate-id.js":function(e,t,n){e.__esModule=!0,e.default=function(){return"function"==typeof r.nativeMethods.performanceNow?r.nativeMethods.performanceNow().toString():(r.nativeMethods.dateNow()+Math.random()).toString()};var r=n("./deps/hammerhead");t.exports=e.default},"iframe-driver.js":function(e,t,n){e.__esModule=!0;var i=n("./deps/hammerhead"),a=n("./deps/testcafe-core"),s=n("./deps/testcafe-ui"),r=o(n("./driver")),u=o(n("./storage")),l=o(n("./status")),c=o(n("./driver-link/parent")),d=n("./driver-link/messages"),f=o(n("./native-dialog-tracker/iframe"));function o(e){return e&&e.__esModule?e:{default:e}}var h=function(r){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,{},{},t));return n.lastParentDriverMessageId=null,n.parentDriverLink=new c.default(window.parent),n._initParentDriverListening(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r),o.prototype._onJsError=function(){},o.prototype._onConsoleMessage=function(){},o.prototype._initParentDriverListening=function(){var n=this;i.eventSandbox.message.on(i.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;a.pageUnloadBarrier.wait(0).then(function(){if(t.type===d.TYPE.executeCommand){if(n.lastParentDriverMessageId===t.id)return;n.lastParentDriverMessageId=t.id,n.readyPromise.then(function(){n.speed=t.testSpeed,n.parentDriverLink.confirmMessageReceived(t.id),n._onCommand(t.command)})}t.type===d.TYPE.setNativeDialogHandler&&(n.nativeDialogsTracker.setHandler(t.dialogHandler),n._setNativeDialogHandlerInIframes(t.dialogHandler))})})},o.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e)},o.prototype._onReady=function(e){this.parentDriverLink.onCommandExecuted(e)},o.prototype.start=function(){var t=this;this.nativeDialogsTracker=new f.default(this.dialogHandler),this.statusBar=new s.IframeStatusBar;var e=this.parentDriverLink.establishConnection().then(function(e){(t.contextStorage=new u.default(window,e),t._failIfClientCodeExecutionIsInterrupted())||(t.contextStorage.getItem(t.COMMAND_EXECUTING_FLAG)||t.contextStorage.getItem(t.EXECUTING_IN_IFRAME_FLAG))&&(t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!1),t._onReady(new l.default({isCommandResult:!0})))});this.readyPromise=i.Promise.all([this.readyPromise,e])},o}(r.default);e.default=h,t.exports=e.default},"index.js":function(e,t,n){var r=u(n("./deps/hammerhead")),o=u(n("./driver")),i=u(n("./iframe-driver")),a=u(n("./script-execution-barrier")),s=u(n("./embedding-utils"));function u(e){return e&&e.__esModule?e:{default:e}}var l=r.default.nativeMethods,c=r.default.EVENTS.evalIframeScript;l.objectDefineProperty(window,"%testCafeDriver%",{configurable:!0,value:o.default}),l.objectDefineProperty(window,"%testCafeIframeDriver%",{configurable:!0,value:i.default}),l.objectDefineProperty(window,"%ScriptExecutionBarrier%",{configurable:!0,value:a.default}),l.objectDefineProperty(window,"%testCafeEmbeddingUtils%",{configurable:!0,value:s.default}),r.default.on(c,function(e){return initTestCafeClientDrivers(l.contentWindowGetter.call(e.iframe),!0)})},"native-dialog-tracker":{"iframe.js":function(e,t,n){e.__esModule=!0;var r=a(n("../deps/hammerhead")),o=a(n("./messages")),i=a(n("./index"));function a(e){return e&&e.__esModule?e:{default:e}}var s=r.default.eventSandbox.message,u=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,null,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype._defaultDialogHandler=function(e){s.sendServiceMsg({type:o.default.unexpectedDialog,dialogType:e,url:i.default._getPageUrl()},window.top)},n.prototype._addAppearedDialogs=function(e,t){s.sendServiceMsg({type:o.default.appearedDialog,dialogType:e,text:t,url:i.default._getPageUrl()},window.top)},n.prototype._onHandlerError=function(e,t){s.sendServiceMsg({type:o.default.handlerError,dialogType:e,message:t,url:i.default._getPageUrl()},window.top)},n}(i.default);e.default=u,t.exports=e.default},"index.js":function(e,t,n){e.__esModule=!0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=a(n("../deps/hammerhead")),i=n("../../../errors/test-run"),s=a(n("../command-executors/client-functions/client-function-executor")),u=a(n("./messages"));function a(e){return e&&e.__esModule?e:{default:e}}var l=o.default.eventSandbox.message,c=o.default.processScript,d=o.default.nativeMethods,f="testcafe|native-dialog-tracker|appeared-dialogs",h="testcafe|native-dialog-tracker|unexpected-dialog",m="testcafe|native-dialog-tracker|error-in-handler",p=c("window.location.href"),E=function(){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.contextStorage=e,this.dialogHandler=t,this._init(),this._initListening(),this.dialogHandler&&this.setHandler(t)}return a._getPageUrl=function(){return d.eval(p)},a.prototype._initListening=function(){var n=this;l.on(l.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;t.type===u.default.appearedDialog?n._addAppearedDialogs(t.dialogType,t.text,t.url):t.type!==u.default.unexpectedDialog||n.unexpectedDialog?t.type!==u.default.handlerError||n.handlerError||n._onHandlerError(t.dialogType,t.message,t.url):n.unexpectedDialog={type:t.dialogType,url:t.url}})},a.prototype._init=function(){var t=this;o.default.on(o.default.EVENTS.beforeUnload,function(e){e.prevented&&!e.isFakeIEEvent&&(t.dialogHandler?t._createDialogHandler("beforeunload")(e.returnValue||""):t._defaultDialogHandler("beforeunload"));t.contextStorage&&t.contextStorage.save()}),window.alert=function(){return t._defaultDialogHandler("alert")},window.confirm=function(){return t._defaultDialogHandler("confirm")},window.prompt=function(){return t._defaultDialogHandler("prompt")}},a.prototype._createDialogHandler=function(o){var i=this;return function(e){var t=a._getPageUrl();i._addAppearedDialogs(o,e,t);var n=new s.default(i.dialogHandler),r=null;try{r=n.fn.apply(window,[o,e,t])}catch(e){i._onHandlerError(o,e.message||String(e),t)}return r}},a.prototype._defaultDialogHandler=function(e){var t=a._getPageUrl();this.unexpectedDialog=this.unexpectedDialog||{type:e,url:t}},a.prototype._addAppearedDialogs=function(e,t,n){this.appearedDialogs.splice(0,0,{type:e,text:t,url:n})},a.prototype._onHandlerError=function(e,t,n){this.handlerError=this.handlerError||{type:e,message:t,url:n}},a.prototype.setHandler=function(e){var t=this;this.dialogHandler=e,["alert","confirm","prompt"].forEach(function(e){window[e]=t.dialogHandler?t._createDialogHandler(e):function(){return t._defaultDialogHandler(e)}})},a.prototype.getUnexpectedDialogError=function(){var e=this.unexpectedDialog,t=this.handlerError;return this.unexpectedDialog=null,this.handlerError=null,e?new i.NativeDialogNotHandledError(e.type,e.url):t?new i.UncaughtErrorInNativeDialogHandler(t.type,t.message,t.url):null},r(a,[{key:"appearedDialogs",get:function(){var e=this.contextStorage.getItem(f);return e||(e=[],this.appearedDialogs=e),e},set:function(e){this.contextStorage.setItem(f,e)}},{key:"unexpectedDialog",get:function(){return this.contextStorage.getItem(h)},set:function(e){this.contextStorage.setItem(h,e)}},{key:"handlerError",get:function(){return this.contextStorage.getItem(m)},set:function(e){this.contextStorage.setItem(m,e)}}]),a}();e.default=E,t.exports=e.default},"messages.js":function(e,t,n){e.__esModule=!0,e.default={appearedDialog:"appeared-dialog",unexpectedDialog:"unexpected-dialog",handlerError:"handler-error"},t.exports=e.default}},"script-execution-barrier.js":function(e,t,n){e.__esModule=!0;var r,o=n("./deps/hammerhead"),i=(r=o)&&r.__esModule?r:{default:r},a=n("./deps/testcafe-core");var s=i.default.Promise,u=i.default.nativeMethods,l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.watchdog=null,this.SCRIPT_LOADING_TIMEOUT=2e3,this.BARRIER_TIMEOUT=3e3,this.scriptsCount=0,this.resolveWaitingPromise=null,this.scriptElementAddedHandler=function(e){return t._onScriptElementAdded(e.el)},i.default.on(i.default.EVENTS.scriptElementAdded,this.scriptElementAddedHandler)}return e.prototype._onScriptElementAdded=function(t){var n=this,e=u.scriptSrcGetter.call(t);if(void 0!==e&&""!==e){this.scriptsCount++;var r=null,o=function e(){u.removeEventListener.call(t,"load",e),u.removeEventListener.call(t,"error",e),u.clearTimeout.call(window,r),n._onScriptLoadedOrFailed()};u.addEventListener.call(t,"load",o),u.addEventListener.call(t,"error",o),r=u.setTimeout.call(window,o,this.SCRIPT_LOADING_TIMEOUT)}},e.prototype._onScriptLoadedOrFailed=function(){var e=this;this.scriptsCount--,this.scriptsCount||(0,a.delay)(25).then(function(){e.resolveWaitingPromise&&(e.scriptsCount||e.resolveWaitingPromise())})},e.prototype.wait=function(){var n=this;return new s(function(e){var t=function(){u.clearTimeout.call(window,n.watchdog),i.default.off(i.default.EVENTS.scriptElementAdded,n.scriptElementAddedHandler),n.watchdog=null,n.resolveWaitingPromise=null,e()};n.scriptsCount?(n.watchdog=u.setTimeout.call(window,function(){return t()},n.BARRIER_TIMEOUT),n.resolveWaitingPromise=function(){return t()}):t()})},e}();e.default=l,t.exports=e.default},"status.js":function(e,t,n){e.__esModule=!0;var r=i(n("../../utils/assignable")),o=i(n("./generate-id"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e));return t.id=(0,o.default)(),t.isCommandResult=!1,t.executionError=null,t.pageError=null,t.resent=!1,t.result=null,t.consoleMessages=null,t._assignFrom(e,!0),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype._getAssignableProperties=function(){return[{name:"isCommandResult"},{name:"executionError"},{name:"pageError"},{name:"result"},{name:"consoleMessages"}]},r}(r.default);e.default=a,t.exports=e.default},"storage.js":function(e,t,n){e.__esModule=!0;var r,o=n("./deps/hammerhead"),i=(r=o)&&r.__esModule?r:{default:r};var a=i.default.json,s=i.default.nativeMethods,u=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.storage=s.winSessionStorageGetter.call(e),this.storageKey="testcafe|driver|"+t,this.data={},this._loadFromStorage()}return n.prototype._loadFromStorage=function(){var e=this.storage.getItem(this.storageKey);e&&(this.data=a.parse(e),this.storage.removeItem(this.storageKey))},n.prototype.save=function(){this.storage.setItem(this.storageKey,a.stringify(this.data))},n.prototype.setItem=function(e,t){this.data[e]=t,this.save()},n.prototype.getItem=function(e){return this.data[e]},n.prototype.dispose=function(){this.storage.removeItem(this.storageKey)},n}();e.default=u,t.exports=e.default},utils:{"element-utils.js":function(e,t,n){e.__esModule=!0,e.exists=function(e){return!!e},e.visible=function(e){return!(!r.domUtils.isDomElement(e)&&!r.domUtils.isTextNode(e))&&(r.domUtils.isOptionElement(e)||"optgroup"===r.domUtils.getTagName(e)?o.selectElement.isOptionElementVisible(e):r.positionUtils.isElementVisible(e))},e.IsNodeCollection=function(e){return e instanceof s||e instanceof u||function(e){if(!i(e))return!1;for(var t=0;t<e.length;t++)if(!(e[t]instanceof a))return!1;return!0}(e)};var r=n("../deps/testcafe-core"),o=n("../deps/testcafe-ui"),i=Array.isArray,a=window.Node,s=window.HTMLCollection,u=window.NodeList},"ensure-elements.js":function(e,t,n){e.__esModule=!0,e.ensureElements=function(e,t){return new l(e,t).getElements()},e.createElementDescriptor=function(e){return{selector:e,createNotFoundError:function(e){return new u.ActionElementNotFoundError(e)},createIsInvisibleError:function(){return new u.ActionElementIsInvisibleError},createHasWrongNodeTypeError:function(e){return new u.ActionSelectorMatchesWrongNodeTypeError(e)}}},e.createAdditionalElementDescriptor=function(e,t){return{selector:e,createNotFoundError:function(e){return new u.ActionAdditionalElementNotFoundError(t,e)},createIsInvisibleError:function(){return new u.ActionAdditionalElementIsInvisibleError(t)},createHasWrongNodeTypeError:function(e){return new u.ActionAdditionalSelectorMatchesWrongNodeTypeError(t,e)}}};var r,o=n("../deps/hammerhead"),a=n("../deps/testcafe-core"),i=n("../command-executors/client-functions/selector-executor"),s=(r=i)&&r.__esModule?r:{default:r},u=n("../../../errors/test-run");var l=function(){function r(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.elements=[],this.globalSelectorTimeout=t,this.ensureElementsPromise=o.Promise.resolve(),this.ensureElementsStartTime=new Date,e.forEach(function(e){return n._ensureElement(e)})}return r.prototype._ensureElement=function(e){var t=this,n=e.selector,r=e.createNotFoundError,o=e.createIsInvisibleError,i=e.createHasWrongNodeTypeError;this.ensureElementsPromise=this.ensureElementsPromise.then(function(){return new s.default(n,t.globalSelectorTimeout,t.ensureElementsStartTime,r,o).getResult()}).then(function(e){if(!a.domUtils.isDomElement(e))throw i(a.NODE_TYPE_DESCRIPTIONS[e.nodeType]);t.elements.push(e)})},r.prototype.getElements=function(){var e=this;return this.ensureElementsPromise.then(function(){return e.elements})},r}()},"run-with-barriers.js":function(e,t,n){e.__esModule=!0,e.default=function(e){var t=new c.RequestBarrier,n=new d.default;c.pageUnloadBarrier.watchForPageNavigationTriggers();for(var r=null,o=arguments.length,i=Array(1<o?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var s=e.apply(void 0,i),u=s.then(function(e){return r=e,l.Promise.all([t.wait().then(function(){return n.wait()}),c.pageUnloadBarrier.wait()])}).then(function(){return r});return{actionPromise:s,barriersPromise:u}};var r,l=n("../deps/hammerhead"),c=n("../deps/testcafe-core"),o=n("../script-execution-barrier"),d=(r=o)&&r.__esModule?r:{default:r};t.exports=e.default}}}},"client-functions":{selectors:{"snapshot-properties.js":function(e,t,n){e.__esModule=!0;var r=e.NODE_SNAPSHOT_PROPERTIES=["nodeType","textContent","childNodeCount","hasChildNodes","childElementCount","hasChildElements"],o=e.ELEMENT_SNAPSHOT_PROPERTIES=["tagName","visible","focused","attributes","boundingClientRect","classNames","style","innerText","namespaceURI","id","value","checked","selected","selectedIndex","scrollWidth","scrollHeight","scrollLeft","scrollTop","offsetWidth","offsetHeight","offsetLeft","offsetTop","clientWidth","clientHeight","clientLeft","clientTop"];e.SNAPSHOT_PROPERTIES=r.concat(o)}}},errors:{"test-run":{"index.js":function(e,t,n){e.__esModule=!0,e.SetNativeDialogHandlerCodeWrongTypeError=e.UncaughtErrorInNativeDialogHandler=e.NativeDialogNotHandledError=e.CurrentIframeIsInvisibleError=e.CurrentIframeNotFoundError=e.CurrentIframeIsNotLoadedError=e.ActionIframeIsNotLoadedError=e.ActionElementNotIframeError=e.RoleSwitchInRoleInitializerError=e.ForbiddenCharactersInScreenshotPathError=e.InvalidElementScreenshotDimensionsError=e.WindowDimensionsOverflowError=e.ActionInvalidScrollTargetError=e.ActionElementIsNotFileInputError=e.ActionCannotFindFileToUploadError=e.ActionIncorrectKeysError=e.ActionRootContainerNotFoundError=e.ActionElementNonContentEditableError=e.ActionElementNotTextAreaError=e.ActionElementNonEditableError=e.ActionAdditionalSelectorMatchesWrongNodeTypeError=e.ActionAdditionalElementIsInvisibleError=e.ActionAdditionalElementNotFoundError=e.ActionSelectorMatchesWrongNodeTypeError=e.ActionElementIsInvisibleError=e.ActionElementNotFoundError=e.ActionSelectorError=e.ActionUnsupportedDeviceTypeError=e.SetTestSpeedArgumentError=e.ActionStringArrayElementError=e.ActionStringOrStringArrayArgumentError=e.ActionPositiveIntegerArgumentError=e.ActionRoleArgumentError=e.ActionIntegerArgumentError=e.ActionNullableStringArgumentError=e.ActionStringArgumentError=e.ActionOptionsTypeError=e.ActionSpeedOptionError=e.ActionBooleanArgumentError=e.ActionBooleanOptionError=e.ActionPositiveIntegerOptionError=e.ActionIntegerOptionError=e.AssertionUnawaitedPromiseError=e.AssertionWithoutMethodCallError=e.AssertionExecutableArgumentError=e.ExternalAssertionLibraryError=e.UncaughtExceptionError=e.UnhandledPromiseRejectionError=e.UncaughtErrorInCustomDOMPropertyCode=e.UncaughtErrorInClientFunctionCode=e.UncaughtNonErrorObjectInTestCode=e.UncaughtErrorInTestCode=e.UncaughtErrorOnPage=e.PageLoadError=e.CannotObtainInfoForElementSpecifiedBySelectorError=e.InvalidSelectorResultError=e.DomNodeClientFunctionResultError=e.ClientFunctionExecutionInterruptionError=e.MissingAwaitError=void 0;var s=n("../types");function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(t){c(this,e),this.code=t,this.isTestCafeError=!0,this.callsite=null},o=function(o){function i(e,t,n){c(this,i);var r=u(this,o.call(this,e));return r.optionName=t,r.actualValue=n,r}return l(i,o),i}(r),i=function(o){function i(e,t,n){c(this,i);var r=u(this,o.call(this,e));return r.argumentName=t,r.actualValue=n,r}return l(i,o),i}(r),a=(e.MissingAwaitError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.missingAwaitError));return t.callsite=e,t}return l(r,n),r}(r),e.ClientFunctionExecutionInterruptionError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.clientFunctionExecutionInterruptionError));return t.instantiationCallsiteName=e,t}return l(r,n),r}(r),e.DomNodeClientFunctionResultError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.domNodeClientFunctionResultError));return t.instantiationCallsiteName=e,t}return l(r,n),r}(r),function(i){function a(e,t){var n=t.apiFnChain,r=t.apiFnIndex;c(this,a);var o=u(this,i.call(this,e));return o.apiFnChain=n,o.apiFnIndex=r,o}return l(a,i),a}(r));e.InvalidSelectorResultError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.invalidSelectorResultError))}return l(t,e),t}(r),e.CannotObtainInfoForElementSpecifiedBySelectorError=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.cannotObtainInfoForElementSpecifiedBySelectorError,t));return n.callsite=e,n}return l(o,r),o}(a),e.PageLoadError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.pageLoadError));return t.errMsg=e,t}return l(r,n),r}(r),e.UncaughtErrorOnPage=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.uncaughtErrorOnPage));return n.errStack=e,n.pageDestUrl=t,n}return l(o,r),o}(r),e.UncaughtErrorInTestCode=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.uncaughtErrorInTestCode));return n.errMsg=String(e),n.callsite=t,n}return l(o,r),o}(r),e.UncaughtNonErrorObjectInTestCode=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.uncaughtNonErrorObjectInTestCode));return t.objType=typeof e,t.objStr=String(e),t}return l(r,n),r}(r),e.UncaughtErrorInClientFunctionCode=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.uncaughtErrorInClientFunctionCode));return n.errMsg=String(t),n.instantiationCallsiteName=e,n}return l(o,r),o}(r),e.UncaughtErrorInCustomDOMPropertyCode=function(o){function i(e,t,n){c(this,i);var r=u(this,o.call(this,s.TEST_RUN_ERRORS.uncaughtErrorInCustomDOMPropertyCode,t,n));return r.errMsg=String(t),r.property=n,r.instantiationCallsiteName=e,r}return l(i,o),i}(r),e.UnhandledPromiseRejectionError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.unhandledPromiseRejection));return t.errMsg=String(e),t}return l(r,n),r}(r),e.UncaughtExceptionError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.uncaughtException));return t.errMsg=String(e),t}return l(r,n),r}(r),e.ExternalAssertionLibraryError=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.externalAssertionLibraryError));return n.errMsg=String(e),n.callsite=t,n}return l(o,r),o}(r),e.AssertionExecutableArgumentError=function(o){function i(e,t,n){c(this,i);var r=u(this,o.call(this,s.TEST_RUN_ERRORS.assertionExecutableArgumentError,e,t));return r.errMsg=n,r}return l(i,o),i}(i),e.AssertionWithoutMethodCallError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.assertionWithoutMethodCallError));return t.callsite=e,t}return l(r,n),r}(r),e.AssertionUnawaitedPromiseError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.assertionUnawaitedPromiseError));return t.callsite=e,t}return l(r,n),r}(r),e.ActionIntegerOptionError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionIntegerOptionError,e,t))}return l(r,n),r}(o),e.ActionPositiveIntegerOptionError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionPositiveIntegerOptionError,e,t))}return l(r,n),r}(o),e.ActionBooleanOptionError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionBooleanOptionError,e,t))}return l(r,n),r}(o),e.ActionBooleanArgumentError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionBooleanArgumentError,e,t))}return l(r,n),r}(i),e.ActionSpeedOptionError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionSpeedOptionError,e,t))}return l(r,n),r}(o),e.ActionOptionsTypeError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.actionOptionsTypeError));return t.actualType=e,t}return l(r,n),r}(r),e.ActionStringArgumentError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionStringArgumentError,e,t))}return l(r,n),r}(i),e.ActionNullableStringArgumentError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionNullableStringArgumentError,e,t))}return l(r,n),r}(i),e.ActionIntegerArgumentError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionIntegerArgumentError,e,t))}return l(r,n),r}(i),e.ActionRoleArgumentError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionRoleArgumentError,e,t))}return l(r,n),r}(i),e.ActionPositiveIntegerArgumentError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionPositiveIntegerArgumentError,e,t))}return l(r,n),r}(i),e.ActionStringOrStringArrayArgumentError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionStringOrStringArrayArgumentError,e,t))}return l(r,n),r}(i),e.ActionStringArrayElementError=function(o){function i(e,t,n){c(this,i);var r=u(this,o.call(this,s.TEST_RUN_ERRORS.actionStringArrayElementError,e,t));return r.elementIndex=n,r}return l(i,o),i}(i),e.SetTestSpeedArgumentError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.setTestSpeedArgumentError,e,t))}return l(r,n),r}(i),e.ActionUnsupportedDeviceTypeError=function(n){function r(e,t){return c(this,r),u(this,n.call(this,s.TEST_RUN_ERRORS.actionUnsupportedDeviceTypeError,e,t))}return l(r,n),r}(i),e.ActionSelectorError=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.actionSelectorError));return n.selectorName=e,n.errMsg=t,n}return l(o,r),o}(r),e.ActionElementNotFoundError=function(t){function n(e){return c(this,n),u(this,t.call(this,s.TEST_RUN_ERRORS.actionElementNotFoundError,e))}return l(n,t),n}(a),e.ActionElementIsInvisibleError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.actionElementIsInvisibleError))}return l(t,e),t}(r),e.ActionSelectorMatchesWrongNodeTypeError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.actionSelectorMatchesWrongNodeTypeError));return t.nodeDescription=e,t}return l(r,n),r}(r),e.ActionAdditionalElementNotFoundError=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.actionAdditionalElementNotFoundError,t));return n.argumentName=e,n}return l(o,r),o}(a),e.ActionAdditionalElementIsInvisibleError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.actionAdditionalElementIsInvisibleError));return t.argumentName=e,t}return l(r,n),r}(r),e.ActionAdditionalSelectorMatchesWrongNodeTypeError=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.actionAdditionalSelectorMatchesWrongNodeTypeError));return n.argumentName=e,n.nodeDescription=t,n}return l(o,r),o}(r),e.ActionElementNonEditableError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.actionElementNonEditableError))}return l(t,e),t}(r),e.ActionElementNotTextAreaError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.actionElementNotTextAreaError))}return l(t,e),t}(r),e.ActionElementNonContentEditableError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.actionElementNonContentEditableError));return t.argumentName=e,t}return l(r,n),r}(r),e.ActionRootContainerNotFoundError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.actionRootContainerNotFoundError))}return l(t,e),t}(r),e.ActionIncorrectKeysError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.actionIncorrectKeysError));return t.argumentName=e,t}return l(r,n),r}(r),e.ActionCannotFindFileToUploadError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.actionCannotFindFileToUploadError));return t.filePaths=e,t}return l(r,n),r}(r),e.ActionElementIsNotFileInputError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.actionElementIsNotFileInputError))}return l(t,e),t}(r),e.ActionInvalidScrollTargetError=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.actionInvalidScrollTargetError));return n.properties=e?"scrollTargetY property":t?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",n}return l(o,r),o}(r),e.WindowDimensionsOverflowError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.windowDimensionsOverflowError));return t.callsite=e,t}return l(r,n),r}(r),e.InvalidElementScreenshotDimensionsError=function(i){function a(e,t){c(this,a);var n=u(this,i.call(this,s.TEST_RUN_ERRORS.invalidElementScreenshotDimensionsError)),r=e<=0,o=t<=0;return n.dimensions=r?o?(n.verb="are","width and height"):(n.verb="is","width"):(n.verb="is","height"),n}return l(a,i),a}(r),e.ForbiddenCharactersInScreenshotPathError=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.forbiddenCharactersInScreenshotPathError));return n.screenshotPath=e,n.forbiddenCharsList=t,n}return l(o,r),o}(r),e.RoleSwitchInRoleInitializerError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.roleSwitchInRoleInitializerError));return t.callsite=e,t}return l(r,n),r}(r),e.ActionElementNotIframeError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.actionElementNotIframeError))}return l(t,e),t}(r),e.ActionIframeIsNotLoadedError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.actionIframeIsNotLoadedError))}return l(t,e),t}(r),e.CurrentIframeIsNotLoadedError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.currentIframeIsNotLoadedError))}return l(t,e),t}(r),e.CurrentIframeNotFoundError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.currentIframeNotFoundError))}return l(t,e),t}(r),e.CurrentIframeIsInvisibleError=function(e){function t(){return c(this,t),u(this,e.call(this,s.TEST_RUN_ERRORS.currentIframeIsInvisibleError))}return l(t,e),t}(r),e.NativeDialogNotHandledError=function(r){function o(e,t){c(this,o);var n=u(this,r.call(this,s.TEST_RUN_ERRORS.nativeDialogNotHandledError));return n.dialogType=e,n.pageUrl=t,n}return l(o,r),o}(r),e.UncaughtErrorInNativeDialogHandler=function(o){function i(e,t,n){c(this,i);var r=u(this,o.call(this,s.TEST_RUN_ERRORS.uncaughtErrorInNativeDialogHandler));return r.dialogType=e,r.errMsg=t,r.pageUrl=n,r}return l(i,o),i}(r),e.SetNativeDialogHandlerCodeWrongTypeError=function(n){function r(e){c(this,r);var t=u(this,n.call(this,s.TEST_RUN_ERRORS.setNativeDialogHandlerCodeWrongTypeError));return t.actualType=e,t}return l(r,n),r}(r)}},"types.js":function(e,t,n){e.__esModule=!0;e.TEST_RUN_ERRORS={uncaughtErrorOnPage:"E1",uncaughtErrorInTestCode:"E2",uncaughtNonErrorObjectInTestCode:"E3",uncaughtErrorInClientFunctionCode:"E4",uncaughtErrorInCustomDOMPropertyCode:"E5",unhandledPromiseRejection:"E6",uncaughtException:"E7",missingAwaitError:"E8",actionIntegerOptionError:"E9",actionPositiveIntegerOptionError:"E10",actionBooleanOptionError:"E11",actionSpeedOptionError:"E12",actionOptionsTypeError:"E14",actionBooleanArgumentError:"E15",actionStringArgumentError:"E16",actionNullableStringArgumentError:"E17",actionStringOrStringArrayArgumentError:"E18",actionStringArrayElementError:"E19",actionIntegerArgumentError:"E20",actionRoleArgumentError:"E21",actionPositiveIntegerArgumentError:"E22",actionSelectorError:"E23",actionElementNotFoundError:"E24",actionElementIsInvisibleError:"E26",actionSelectorMatchesWrongNodeTypeError:"E27",actionAdditionalElementNotFoundError:"E28",actionAdditionalElementIsInvisibleError:"E29",actionAdditionalSelectorMatchesWrongNodeTypeError:"E30",actionElementNonEditableError:"E31",actionElementNotTextAreaError:"E32",actionElementNonContentEditableError:"E33",actionElementIsNotFileInputError:"E34",actionRootContainerNotFoundError:"E35",actionIncorrectKeysError:"E36",actionCannotFindFileToUploadError:"E37",actionUnsupportedDeviceTypeError:"E38",actionIframeIsNotLoadedError:"E39",actionElementNotIframeError:"E40",actionInvalidScrollTargetError:"E41",currentIframeIsNotLoadedError:"E42",currentIframeNotFoundError:"E43",currentIframeIsInvisibleError:"E44",nativeDialogNotHandledError:"E45",uncaughtErrorInNativeDialogHandler:"E46",setTestSpeedArgumentError:"E47",setNativeDialogHandlerCodeWrongTypeError:"E48",clientFunctionExecutionInterruptionError:"E49",domNodeClientFunctionResultError:"E50",invalidSelectorResultError:"E51",cannotObtainInfoForElementSpecifiedBySelectorError:"E52",externalAssertionLibraryError:"E53",pageLoadError:"E54",windowDimensionsOverflowError:"E55",forbiddenCharactersInScreenshotPathError:"E56",invalidElementScreenshotDimensionsError:"E57",roleSwitchInRoleInitializerError:"E58",assertionExecutableArgumentError:"E59",assertionWithoutMethodCallError:"E60",assertionUnawaitedPromiseError:"E61"},e.RUNTIME_ERRORS={cannotCreateMultipleLiveModeRunners:"E1000",cannotRunLiveModeRunnerMultipleTimes:"E1001",browserDisconnected:"E1002",cannotRunAgainstDisconnectedBrowsers:"E1003",cannotEstablishBrowserConnection:"E1004",cannotFindBrowser:"E1005",browserProviderNotFound:"E1006",browserNotSet:"E1007",testSourcesNotSet:"E1008",noTestsToRun:"E1009",cannotFindReporterForAlias:"E1010",multipleStdoutReporters:"E1011",optionValueIsNotValidRegExp:"E1012",optionValueIsNotValidKeyValue:"E1013",invalidSpeedValue:"E1014",invalidConcurrencyFactor:"E1015",cannotDivideRemotesCountByConcurrency:"E1016",portsOptionRequiresTwoNumbers:"E1017",portIsNotFree:"E1018",invalidHostname:"E1019",cannotFindSpecifiedTestSource:"E1020",clientFunctionCodeIsNotAFunction:"E1021",selectorInitializedWithWrongType:"E1022",clientFunctionCannotResolveTestRun:"E1023",regeneratorInClientFunctionCode:"E1024",invalidClientFunctionTestRunBinding:"E1025",invalidValueType:"E1026",unsupportedUrlProtocol:"E1027",testControllerProxyCannotResolveTestRun:"E1028",timeLimitedPromiseTimeoutExpired:"E1029",cannotUseScreenshotPathPatternWithoutBaseScreenshotPathSpecified:"E1030",cannotSetVideoOptionsWithoutBaseVideoPathSpecified:"E1031",multipleAPIMethodCallForbidden:"E1032",invalidReporterOutput:"E1033",cannotReadSSLCertFile:"E1034",cannotPrepareTestsDueToError:"E1035",cannotParseRawFile:"E1036",testedAppFailedWithError:"E1037",unableToOpenBrowser:"E1038",requestHookConfigureAPIError:"E1039",forbiddenCharatersInScreenshotPath:"E1040",cannotFindFFMPEG:"E1041",compositeArgumentsError:"E1042"}}},"test-run":{"browser-console-messages.js":function(e,t,n){e.__esModule=!0;var r,o=n("../utils/assignable");var i=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this));return t.log=[],t.info=[],t.warn=[],t.error=[],t._assignFrom(e),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype._getAssignableProperties=function(){return[{name:"log"},{name:"info"},{name:"warn"},{name:"error"}]},r.prototype.concat=function(e){this.log=this.log.concat(e.log),this.info=this.info.concat(e.info),this.warn=this.warn.concat(e.warn),this.error=this.error.concat(e.error)},r.prototype.addMessage=function(e,t){this[e].push(t)},r.prototype.getCopy=function(){for(var e={},t=this._getAssignableProperties(),n=0,r=t.length;n<r;n++){var o=t[n];e[o.name]=this[o.name].slice()}return e},r}(((r=o)&&r.__esModule?r:{default:r}).default);e.default=i,t.exports=e.default},"client-messages.js":function(e,t,n){e.__esModule=!0,e.default={ready:"ready",readyForBrowserManipulation:"ready-for-browser-manipulation",waitForFileDownload:"wait-for-file-download"},t.exports=e.default},commands:{"options.js":function(e,t,n){e.__esModule=!0,e.AssertionOptions=e.ResizeToFitDeviceOptions=e.DragToElementOptions=e.TypeOptions=e.MoveOptions=e.ClickOptions=e.MouseOptions=e.ElementScreenshotOptions=e.ScrollOptions=e.OffsetOptions=e.ActionOptions=e.speedOption=e.booleanOption=e.positiveIntegerOption=e.integerOption=void 0;var r,o=n("../../utils/assignable"),i=(r=o)&&r.__esModule?r:{default:r},a=n("./validations/factories"),s=n("../../errors/test-run");function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=e.integerOption=(0,a.createIntegerValidator)(s.ActionIntegerOptionError),f=e.positiveIntegerOption=(0,a.createPositiveIntegerValidator)(s.ActionPositiveIntegerOptionError),h=e.booleanOption=(0,a.createBooleanValidator)(s.ActionBooleanOptionError),m=e.speedOption=(0,a.createSpeedValidator)(s.ActionSpeedOptionError),p=e.ActionOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this));return n.speed=null,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return[{name:"speed",type:m}]},o}(i.default),E=e.OffsetOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this));return n.offsetX=null,n.offsetY=null,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:d},{name:"offsetY",type:d}])},o}(p),g=(e.ScrollOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this));return n.scrollToCenter=!1,n.skipParentFrames=!1,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:h},{name:"skipParentFrames",type:h}])},o}(E),e.ElementScreenshotOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this));return n.scrollTargetX=null,n.scrollTargetY=null,n.includeMargins=!1,n.includeBorders=!0,n.includePaddings=!0,n.crop={left:null,right:null,top:null,bottom:null},n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:d},{name:"scrollTargetY",type:d},{name:"crop.left",type:d},{name:"crop.right",type:d},{name:"crop.top",type:d},{name:"crop.bottom",type:d},{name:"includeMargins",type:h},{name:"includeBorders",type:h},{name:"includePaddings",type:h}])},o}(p),e.MouseOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this));return n.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:h},{name:"modifiers.alt",type:h},{name:"modifiers.shift",type:h},{name:"modifiers.meta",type:h}])},o}(E)),v=e.ClickOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this));return n.caretPos=null,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:f}])},o}(g);e.MoveOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this));return n.speed=null,n.minMovingTime=null,n.holdLeftButton=!1,n.skipScrolling=!1,n.skipDefaultDragBehavior=!1,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:h},{name:"skipDefaultDragBehavior",type:h}])},o}(g),e.TypeOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this));return n.replace=!1,n.paste=!1,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:h},{name:"paste",type:h}])},o}(v),e.DragToElementOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this,e,t));return n.destinationOffsetX=null,n.destinationOffsetY=null,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:d},{name:"destinationOffsetY",type:d}])},o}(g),e.ResizeToFitDeviceOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this));return n.portraitOrientation=!1,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:h}]},o}(i.default),e.AssertionOptions=function(r){function o(e,t){u(this,o);var n=l(this,r.call(this));return n.timeout=void 0,n.allowUnawaitedPromise=!1,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return[{name:"timeout",type:f},{name:"allowUnawaitedPromise",type:h}]},o}(i.default)},"type.js":function(e,t,n){e.__esModule=!0,e.default={click:"click",rightClick:"right-click",doubleClick:"double-click",drag:"drag",dragToElement:"drag-to-element",hover:"hover",typeText:"type-text",selectText:"select-text",selectTextAreaContent:"select-text-area-content",selectEditableContent:"select-editable-content",pressKey:"press-key",wait:"wait",navigateTo:"navigate-to",setFilesToUpload:"set-files-to-upload",clearUpload:"clear-upload",executeClientFunction:"execute-client-function",executeSelector:"execute-selector",takeScreenshot:"take-screenshot",takeElementScreenshot:"take-element-screenshot",takeScreenshotOnFail:"take-screenshot-on-fail",prepareBrowserManipulation:"prepare-browser-manipulation",showAssertionRetriesStatus:"show-assertion-retries-status",hideAssertionRetriesStatus:"hide-assertion-retries-status",setBreakpoint:"set-breakpoint",resizeWindow:"resize-window",resizeWindowToFitDevice:"resize-window-to-fit-device",maximizeWindow:"maximize-window",switchToIframe:"switch-to-iframe",switchToMainWindow:"switch-to-main-window",setNativeDialogHandler:"set-native-dialog-handler",getNativeDialogHistory:"get-native-dialog-history",getBrowserConsoleMessages:"get-browser-console-messages",setTestSpeed:"set-test-speed",setPageLoadTimeout:"set-page-load-timeout",debug:"debug",assertion:"assertion",useRole:"useRole",testDone:"test-done",backupStorages:"backup-storages",executeExpression:"execute-expression",unlockPage:"unlock-page"},t.exports=e.default},"utils.js":function(e,t,n){e.__esModule=!0,e.isCommandRejectableByPageError=function(e){return!(r=e,(s(r)||r.type===i.default.wait||r.type===i.default.assertion||r.type===i.default.executeExpression||u(e)||l(e))&&(n=e,n.type!==i.default.resizeWindow&&n.type!==i.default.resizeWindowToFitDevice&&n.type!==i.default.maximizeWindow||(t=e,t.type===i.default.switchToIframe||t.type===i.default.switchToMainWindow)));var t;var n;var r},e.canSetDebuggerBreakpointBeforeCommand=function(e){return e.type!==i.default.debug&&!s(e)&&!l(e)},e.isScreenshotCommand=function(e){return e.type===i.default.takeScreenshot||e.type===i.default.takeElementScreenshot||e.type===i.default.takeScreenshotOnFail},e.isBrowserManipulationCommand=u,e.isServiceCommand=l,e.isExecutableInTopWindowOnly=function(e){return e.type===i.default.testDone||e.type===i.default.switchToMainWindow||e.type===i.default.setNativeDialogHandler||e.type===i.default.getNativeDialogHistory||e.type===i.default.setTestSpeed||e.type===i.default.showAssertionRetriesStatus||e.type===i.default.hideAssertionRetriesStatus||e.type===i.default.setBreakpoint||u(e)&&e.type!==i.default.takeElementScreenshot},e.isJSExpression=function(e){return null!==e&&"object"==typeof e&&e.type===a&&"string"==typeof e.value},e.isExecutableOnClientCommand=function(e){return e.type!==i.default.wait&&e.type!==i.default.setPageLoadTimeout&&e.type!==i.default.debug&&e.type!==i.default.useRole&&e.type!==i.default.assertion&&e.type!==i.default.executeExpression};var r,o=n("./type"),i=(r=o)&&r.__esModule?r:{default:r};var a="js-expr";function s(e){return e.type===i.default.executeClientFunction||e.type===i.default.executeSelector}function u(e){return e.type===i.default.takeScreenshot||e.type===i.default.takeElementScreenshot||e.type===i.default.takeScreenshotOnFail||e.type===i.default.resizeWindow||e.type===i.default.resizeWindowToFitDevice||e.type===i.default.maximizeWindow}function l(e){return e.type===i.default.testDone||e.type===i.default.takeScreenshotOnFail||e.type===i.default.showAssertionRetriesStatus||e.type===i.default.hideAssertionRetriesStatus||e.type===i.default.setBreakpoint||e.type===i.default.takeScreenshotOnFail}},validations:{"factories.js":function(e,t,n){function o(r){return function(e,t){var n=typeof t;if("number"!==n)throw new r(e,n);if(!(!isNaN(t)&&isFinite(t)&&t===Math.floor(t)))throw new r(e,t)}}e.__esModule=!0,e.createIntegerValidator=o,e.createPositiveIntegerValidator=function(n){var r=o(n);return function(e,t){if(r(e,t),t<0)throw new n(e,t)}},e.createBooleanValidator=function(r){return function(e,t){var n=typeof t;if("boolean"!==n)throw new r(e,n)}},e.createSpeedValidator=function(r){return function(e,t){var n=typeof t;if("number"!==n)throw new r(e,n);if(isNaN(t)||t<.01||1<t)throw new r(e,t)}}}}}},utils:{"assignable.js":function(e,t,n){e.__esModule=!0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},e.prototype._assignFrom=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var r=this._getAssignableProperties(),o=0;o<r.length;o++){for(var i=r[o],a=i.name,s=i.type,u=i.required,l=i.init,c=i.defaultValue,d=a.split("."),f=d.length-1,h=d[f],m=e,p=this,E=0;E<f&&m&&p;E++)m=m[d[E]],p=p[d[E]];if(p&&"defaultValue"in r[o]&&(p[a]=c),m&&p){var g=m[h];(void 0!==g||u)&&(t&&s&&s(a,g),p[h]=l?l(a,g,n):g)}}},e}();e.default=r,t.exports=e.default},"limit-number.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){return Math.min(Math.max(t,e),n)},t.exports=e.default}}}}})("testcafe-release/src/client/driver/index")}initTestCafeClientDrivers(window)}();